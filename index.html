<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    <title>Document</title>
</head>
<body class="display: flex; justify-content: center;">

    <div class="container mt-3" p>
        <form class="form-signin" style="width: 25rem">
            <h1 class="h3 mb-3 font-weight-normal">Добавить новый пароль</h1>

            <label for="inputEmail" class="sr-only">Логин:</label>
            <input id="login" type="text" class="form-control" placeholder="Логин" required="" autofocus="">

            <label for="inputPassword" class="sr-only">Пароль:</label>
            <input id="password" type="password"  class="form-control" placeholder="Пароль" required="">

            <label for="inputEmail" class="sr-only">Ссылка:</label>
            <input id="url" type="text" class="form-control" placeholder="Ссылка" required="" autofocus="">

            <button  id="savePassword" class="mt-3 btn btn-lg btn-primary btn-block" type="submit">Сохранить</button>
        </form>


    </div>

    <script>
        const button = document.querySelector('#savePassword')

        const login = document.querySelector('#login')
        const password = document.querySelector('#password')
        const url = document.querySelector('#url')


        button.addEventListener('click', (e) => {
            e.preventDefault()
            const obj = {}

            obj['login'] = login.value
            obj['password'] = password.value
            obj['url'] = url.value
            const id = localStorage.length + 1
            
            localStorage.setItem(localStorage.length + 1, JSON.stringify(obj))

            let card = document.createElement('div');
            let cardHeader = document.createElement('div');
            let cardBody = document.createElement('div');
            let loginPara = document.createElement('p');
            let passwordPara = document.createElement('p');
            let linkPara = document.createElement('p');
            let deleteButton = document.createElement('button');


            card.className = 'card mt-5';
            card.style.width = '50rem';
            cardHeader.className = 'card-header';
            cardBody.className = 'card-body';
            loginPara.className = 'card-text';
            passwordPara.className = 'card-text';
            linkPara.className = 'card-text';
            deleteButton.className = 'btn btn-danger';


            cardHeader.textContent = `id: ${id}`;
            loginPara.textContent = `Логин: ${JSON.parse(localStorage.getItem(id)).login}`
            passwordPara.textContent = `Пароль: ${JSON.parse(localStorage.getItem(id)).password}`
            linkPara.textContent = `Ссылка: ${JSON.parse(localStorage.getItem(id)).url}`
            deleteButton.textContent = 'Удалить';


            deleteButton.setAttribute('type', 'button');
            deleteButton.onclick = function() {
                localStorage.removeItem(id);

                card.remove();
            };


            card.appendChild(cardHeader);
            card.appendChild(cardBody);
            cardBody.appendChild(loginPara);
            cardBody.appendChild(passwordPara);
            cardBody.appendChild(linkPara);
            cardBody.appendChild(deleteButton);


            document.querySelector('.container').appendChild(card);

            login.value = ""
            password.value = ""
            url.value = ""
        })

        for(let i=0; i < localStorage.length; i++) {
            let id = localStorage.key(i);

            let card = document.createElement('div');
            let cardHeader = document.createElement('div');
            let cardBody = document.createElement('div');
            let loginPara = document.createElement('p');
            let passwordPara = document.createElement('p');
            let linkPara = document.createElement('p');
            let deleteButton = document.createElement('button');


            card.className = 'card mt-5';
            card.style.width = '50rem';
            cardHeader.className = 'card-header';
            cardBody.className = 'card-body';
            loginPara.className = 'card-text';
            passwordPara.className = 'card-text';
            linkPara.className = 'card-text';
            deleteButton.className = 'btn btn-danger';

            // Устанавливаем текстовое содержимое
            cardHeader.textContent = `id: ${id}`;
            loginPara.textContent = `Логин: ${JSON.parse(localStorage.getItem(id)).login}`
            passwordPara.textContent = `Пароль: ${JSON.parse(localStorage.getItem(id)).password}`
            linkPara.textContent = `Ссылка: ${JSON.parse(localStorage.getItem(id)).url}`
            deleteButton.textContent = 'Удалить';


            deleteButton.setAttribute('type', 'button');
            deleteButton.onclick = function() {
                localStorage.removeItem(id);

                card.remove();
            };


            card.appendChild(cardHeader);
            card.appendChild(cardBody);
            cardBody.appendChild(loginPara);
            cardBody.appendChild(passwordPara);
            cardBody.appendChild(linkPara);
            cardBody.appendChild(deleteButton);

            document.querySelector('.container').appendChild(card);
        }
    </script>




    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js" integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous"></script>
</body>
</html>